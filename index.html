<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Scholar - Personal Browser</title>
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval'; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src * 'unsafe-inline'; img-src * data: blob: 'unsafe-inline'; frame-src *;">
    
    <style>
        :root {
            --color-primary: #6366f1;
            --color-primary-hover: #4f46e5;
            --color-bg-dark: #0f172a;
            --color-text-primary: #f1f5f9;
            --color-text-secondary: #cbd5e1;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: url('https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/e5571564-1a16-43b8-b76d-4b92c3631010') center/cover fixed;
            color: var(--color-text-primary);
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.75); z-index: -1;
        }

        /* --- LAYOUT --- */
        .container { display: flex; height: 100vh; gap: 20px; padding: 20px; }
        .main-content { flex: 1; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--color-primary); border-radius: 4px; }

        /* Sidebar */
        .sidebar {
            width: 350px; display: flex; flex-direction: column; gap: 20px;
            background: rgba(30, 41, 59, 0.65); backdrop-filter: blur(12px);
            padding: 20px; border-radius: 20px; border: 1px solid rgba(148, 163, 184, 0.2);
        }

        /* Header */
        .header {
            display: flex; justify-content: space-between; align-items: center; padding: 20px;
            background: rgba(30, 41, 59, 0.85); backdrop-filter: blur(12px);
            border-radius: 16px; border: 1px solid rgba(148, 163, 184, 0.2);
        }
        .time { font-size: 24px; font-weight: 700; }

        /* Search Bar */
        .search-container { display: flex; gap: 10px; }
        .search-bar {
            flex: 1; padding: 12px 20px; background: rgba(30, 41, 59, 0.85);
            border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 12px;
            color: white; backdrop-filter: blur(12px);
        }
        .search-btn {
            padding: 10px 20px; background: var(--gradient-1); border: none;
            border-radius: 12px; color: white; cursor: pointer; font-weight: 600;
        }

        /* Shortcuts Grid */
        .shortcuts-section { margin-top: 10px; }
        .section-title { font-size: 14px; font-weight: 700; color: var(--color-text-secondary); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        
        .shortcuts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(85px, 1fr));
            gap: 12px;
            padding-bottom: 20px;
        }
        
        .shortcut-btn {
            aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            gap: 8px; padding: 10px; background: rgba(30, 41, 59, 0.75);
            border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 14px;
            color: white; text-decoration: none; transition: all 0.3s;
            cursor: pointer; font-size: 11px; text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        .shortcut-btn:hover { 
            transform: translateY(-5px); 
            background: rgba(99, 102, 241, 0.25); 
            border-color: var(--color-primary); 
        }
        
        /* Icon Styling */
        .logo-img { 
            width: 32px; height: 32px; 
            transition: transform 0.3s;
            /* Ensures SVGs are visible on dark background */
        }
        .shortcut-btn:hover .logo-img { transform: scale(1.1); }

        /* Sidebar Panels */
        .panel { 
            background: rgba(15, 23, 42, 0.6); border-radius: 12px; padding: 15px; 
            border: 1px solid rgba(148, 163, 184, 0.1); flex: 1; overflow-y: auto;
        }
        .panel-title { font-weight: 700; margin-bottom: 10px; border-left: 3px solid var(--color-primary); padding-left: 10px; }

        /* Tabs & Buttons */
        .tabs { display: flex; gap: 10px; margin-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .tab-btn { background: none; border: none; color: #aaa; padding: 5px 10px; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab-btn.active { color: white; border-bottom-color: var(--color-primary); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .btn-action { width: 100%; padding: 8px; background: var(--color-primary); border: none; border-radius: 6px; color: white; cursor: pointer; margin-top: 10px; }
        .btn-action:hover { background: var(--color-primary-hover); }
        textarea { width: 100%; background: rgba(0,0,0,0.3); border: 1px solid #444; color: white; border-radius: 6px; padding: 8px; font-family: inherit; }

        /* INPUTS */
        input[type="text"], input[type="password"], input[type="time"] {
            width: 100%; padding: 8px; background: rgba(0,0,0,0.3); 
            border: 1px solid #444; border-radius: 4px; color: white;
            font-family: inherit;
        }

        /* --- ELECTRON BROWSER VIEW --- */
        .frame-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0f172a; z-index: 1000; display: none; flex-direction: column;
        }
        .frame-container.active { display: flex; }
        
        .frame-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px 20px; background: #1e293b; border-bottom: 1px solid #334155;
        }
        .browser-controls button {
            background: none; border: none; color: white; font-size: 18px; 
            padding: 5px 10px; cursor: pointer; border-radius: 4px;
        }
        .browser-controls button:hover { background: rgba(255,255,255,0.1); }
        
        webview { flex: 1; width: 100%; height: 100%; border: none; background: white; }

        /* Floating AI Button */
        .ai-float-btn {
            position: fixed; bottom: 30px; right: 30px; width: 50px; height: 50px;
            border-radius: 50%; background: var(--gradient-1); border: none;
            color: white; font-size: 20px; cursor: pointer; z-index: 1001;
            display: none; box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            align-items: center; justify-content: center;
            transition: transform 0.2s;
        }
        .ai-float-btn:hover { transform: scale(1.1); }
        .ai-float-btn.visible { display: flex; }
        
        .ai-float-panel {
            position: fixed; bottom: 90px; right: 30px; width: 320px;
            background: rgba(30, 41, 59, 0.95); backdrop-filter: blur(20px);
            padding: 15px; border-radius: 12px; z-index: 1001;
            display: none; border: 1px solid #444; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .ai-float-panel.active { display: block; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div class="container">
        <div class="main-content">
            <div class="header">
                <div>
                    <h1 style="background: var(--gradient-1); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">AI Scholar</h1>
                    <p style="font-size: 12px; color: var(--color-text-secondary);">Anirban's Personal Browser</p>
                </div>
                <div class="time" id="currentTime">00:00</div>
            </div>

            <div class="search-container">
                <input type="text" class="search-bar" id="searchInput" placeholder="Search Google or Enter URL...">
                <button class="search-btn" onclick="performSearch()">Go</button>
            </div>

            <div class="shortcuts-section">
                <div class="section-title">Your Apps</div>
                <div class="shortcuts-grid">
                    
                    <div onclick="openInView('https://chatgpt.com')" class="shortcut-btn" title="ChatGPT">
                        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzEwYTM3ZiI+PHBhdGggZD0iTTIyLjI4MTkgOS44MjExYTUuOTk3OSA1Ljk5NzkgMCAwIDAtLjQ3NjUtNC41NzI4IDYuMDAyMyA2LjAwMjMgMCAwIDAtNS4xOTA5LTMuMTM4NEg5LjgzNDVhNS45OTk0IDUuOTk5NCAwIDAgMC00LjcyNDYgMi4zMjgyIDYuMDAwNSA2LjAwMDUgMCAwIDAtLjQ3NTIgNC41NzM4QzIuODUyIDkuNDMzOCAxLjQ5NjIgMTEuMzA2MyAxLjAzNzcgMTMuMzE5YTYuMDA1IDYuMDA1IDAgMCAwIDEuNzE4IDUuODQwNmMtLjAwMzMuMTY2LS4wMDUxLjMzMy0uMDA1MS41MDA3YTYgNiAwIDAgMCA2IDZoNi44NDcxYTYuMDAyNiA2LjAwMjYgMCAwIDAgNS4xOTEtMy4xMzk1aDEuNzg0M2E1Ljk5OTQgNS45OTk0IDAgMCAwIDQuNzI0Ni0yLjMyODIgNi4wMDA1IDYuMDAwNSgMCAwIDAgLjQ3NTItNC41NzM4YzEuNzgxOS0uNDI5IDIuMTM3Ny0yLjMwMTUgMi41OTYyLTQuMzE0MmE2LjAwNSA2LjAwNSAwIDAgMC0xLjcxOC01Ljg0MDZaIiBmaWxsPSIjNzQ5ZjgyIi8+PC9zdmc+" class="logo-img" style="filter: none;">
                        <span>ChatGPT</span>
                    </div>
                    
                    <div onclick="openInView('https://gemini.google.com')" class="shortcut-btn" title="Gemini">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238e75b2'><path d='M12 0L14.5 9.5L24 12L14.5 14.5L12 24L9.5 14.5L0 12L9.5 9.5z'/></svg>" class="logo-img">
                        <span>Gemini</span>
                    </div>

                    <div onclick="openInView('https://perplexity.ai')" class="shortcut-btn" title="Perplexity">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2322b3c2'><path d='M12 2a5 5 0 0 1 5 5c0 .7-.12 1.36-.34 2l.34.34c.56.57.88 1.34.88 2.16s-.32 1.59-.88 2.16l-.34.34A4.98 4.98 0 0 1 17 22H7a5 5 0 0 1-5-5c0-.7.12-1.36.34-2l-.34-.34A2.97 2.97 0 0 1 1.12 12c0-.82.32-1.59.88-2.16l.34-.34A4.98 4.98 0 0 1 2 7a5 5 0 0 1 5-5h5z'/></svg>" class="logo-img">
                        <span>Perplexity</span>
                    </div>

                    <div onclick="openInView('https://scispace.com')" class="shortcut-btn" title="SciSpace">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23F7931E'><path d='M12,2A10,10 0 1,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 1,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 1,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 1,1 8,12A4,4 0 0,1 12,8Z'/></svg>" class="logo-img">
                        <span>SciSpace</span>
                    </div>

                    <div onclick="openInView('https://researchrabbit.ai')" class="shortcut-btn" title="Research Rabbit">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FF6B6B'><path d='M12,2C8,2 6,6 6,6S4,4 2,6C0,8 2,12 6,14C6,18 8,22 12,22C16,22 18,18 18,14C22,12 24,8 22,6C20,4 18,6 18,6S16,2 12,2Z'/></svg>" class="logo-img">
                        <span>Res. Rabbit</span>
                    </div>

                    <div onclick="openInView('https://elicit.org')" class="shortcut-btn" title="Elicit">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FFB300'><path d='M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.5,17L14,18.5L11.5,16C10.6,16.6 9.5,16.8 8.5,16.3C7,15.6 6.2,14 6.7,12.5C7.2,11 8.8,10.2 10.3,10.7C11.6,11.2 12.4,12.4 12.4,13.8L15.5,17Z'/></svg>" class="logo-img">
                        <span>Elicit</span>
                    </div>

                    <div onclick="openInView('https://semanticscholar.org')" class="shortcut-btn" title="Semantic Scholar">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234285F4'><path d='M12 3L1 9L5 11.18V17.18L12 21L19 17.18V11.18L21 10.09V17H23V9L12 3M18.82 9L12 12.72L5.18 9L12 5.28L18.82 9M17 16L12 18.72L7 16V12.27L12 15L17 12.27V16Z'/></svg>" class="logo-img">
                        <span>Scholar</span>
                    </div>

                    <div onclick="openInView('https://huggingface.co/spaces/ysharma/Grad_Humanizer')" class="shortcut-btn" title="YM Grad Humanizer">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FFD21E'><path d='M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7H15A4,4 0 0,1 19,11V13H20A2,2 0 0,1 22,15V17A2,2 0 0,1 20,19H19V20A2,2 0 0,1 17,22H7A2,2 0 0,1 5,20V19H4A2,2 0 0,1 2,17V15A2,2 0 0,1 4,13H5V11A4,4 0 0,1 9,7H11V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2M7.5,13A1.5,1.5 0 0,0 6,14.5A1.5,1.5 0 0,0 7.5,16A1.5,1.5 0 0,0 9,14.5A1.5,1.5 0 0,0 7.5,13M16.5,13A1.5,1.5 0 0,0 15,14.5A1.5,1.5 0 0,0 16.5,16A1.5,1.5 0 0,0 18,14.5A1.5,1.5 0 0,0 16.5,13Z'/></svg>" class="logo-img">
                        <span>Humanizer</span>
                    </div>

                    <div onclick="openInView('https://youtube.com')" class="shortcut-btn" title="YouTube">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff0000'><path d='M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z'/></svg>" class="logo-img">
                        <span>YouTube</span>
                    </div>
                    <div onclick="openInView('https://google.com')" class="shortcut-btn" title="Google">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234285f4'><path d='M21.35 11.1h-9.17v2.73h6.51c-.33 3.81-3.5 5.44-6.5 5.44C8.36 19.27 5 16.25 5 12c0-4.1 3.2-7.27 7.2-7.27 3.09 0 4.9 1.97 4.9 1.97L19 4.72S16.56 2 12.1 2C6.42 2 2.03 6.8 2.03 12c0 5.05 4.13 10 10.22 10 5.35 0 9.25-3.67 9.25-9.09 0-1.15-.15-1.81-.15-1.81z'/></svg>" class="logo-img">
                        <span>Google</span>
                    </div>
                    <div onclick="openInView('https://gmail.com')" class="shortcut-btn" title="Gmail">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ea4335'><path d='M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z'/></svg>" class="logo-img">
                        <span>Gmail</span>
                    </div>
                    <div onclick="openInView('https://meet.google.com')" class="shortcut-btn" title="Meet">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2300897b'><path d='M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z'/></svg>" class="logo-img">
                        <span>Meet</span>
                    </div>

                    <div onclick="openInView('https://github.com')" class="shortcut-btn" title="GitHub">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'><path d='M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z'/></svg>" class="logo-img">
                        <span>GitHub</span>
                    </div>

                    <div onclick="openInView('https://discord.com/app')" class="shortcut-btn" title="Discord">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%235865F2'><path d='M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.2 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02zM8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12zm6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.85 2.12-1.89 2.12z'/></svg>" class="logo-img">
                        <span>Discord</span>
                    </div>

                    <div onclick="openInView('https://web.whatsapp.com')" class="shortcut-btn" title="WhatsApp">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2325D366'><path d='M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.38 21.83 12.04 21.83C17.5 21.83 21.95 17.38 21.95 11.92C21.95 9.27 20.92 6.78 19.05 4.91C17.18 3.03 14.69 2 12.04 2M12.05 3.67C14.25 3.67 16.31 4.53 17.87 6.09C19.42 7.65 20.28 9.72 20.28 11.92C20.28 16.46 16.58 20.15 12.04 20.15C10.56 20.15 9.11 19.76 7.85 19L7.55 18.83L4.43 19.65L5.26 16.61L5.06 16.29C4.24 15 3.8 13.47 3.8 11.91C3.81 7.37 7.5 3.67 12.05 3.67Z'/></svg>" class="logo-img">
                        <span>WhatsApp</span>
                    </div>

                    <div onclick="openInView('https://twitter.com')" class="shortcut-btn" title="Twitter / X">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'><path d='M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z'/></svg>" class="logo-img">
                        <span>X / Twitter</span>
                    </div>

                    <div onclick="openInView('https://instagram.com')" class="shortcut-btn" title="Instagram">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23E4405F'><path d='M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z'/></svg>" class="logo-img">
                        <span>Instagram</span>
                    </div>

                    <div onclick="openInView('https://facebook.com')" class="shortcut-btn" title="Facebook">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%231877F2'><path d='M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z'/></svg>" class="logo-img">
                        <span>Facebook</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <div class="panel">
                <div class="panel-title">ü§ñ Assistant & Tools</div>
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('notes')">Notes</button>
                    <button class="tab-btn" onclick="switchTab('tasks')">Reminders</button>
                    <button class="tab-btn" onclick="switchTab('settings')">Settings</button>
                </div>

                <div id="notes" class="tab-content active">
                    <textarea id="quickNote" rows="4" placeholder="Type a note here..."></textarea>
                    <button class="btn-action" onclick="saveNote()">Save Note</button>
                    <div id="notesList" style="margin-top: 15px; font-size: 12px; color: #ccc;"></div>
                </div>

                <div id="tasks" class="tab-content">
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <input type="text" id="taskInput" placeholder="Remind me to..." style="background: rgba(0,0,0,0.3); border:1px solid #444; color:white; padding:8px; border-radius:4px;">
                        <div style="display: flex; gap: 8px;">
                            <input type="time" id="taskTime" style="flex:1;">
                            <button class="btn-action" onclick="addTask()" style="margin-top:0; width: auto;">Add</button>
                        </div>
                    </div>
                    <div id="taskList" style="margin-top:15px; font-size:12px;"></div>
                </div>

                <div id="settings" class="tab-content">
                    <label style="font-size:12px;">Gemini API Key</label>
                    <input type="password" id="apiKey" style="margin-top:5px;">
                    <button class="btn-action" onclick="saveApiKey()">Save Key</button>
                </div>
            </div>
        </div>
    </div>

    <div class="frame-container" id="frameContainer">
        <div class="frame-header">
            <div class="browser-controls">
                <button onclick="closeView()" title="Close Browser" style="color:#ef4444; font-weight:bold;">‚úï</button>
                <button onclick="webviewBack()" title="Back">‚Üê</button>
                <button onclick="webviewForward()" title="Forward">‚Üí</button>
                <button onclick="webviewReload()" title="Reload">‚Üª</button>
            </div>
            <span id="frameTitle" style="color:white; font-size:14px; margin-left:15px; overflow:hidden; white-space:nowrap; max-width:400px;">Browsing...</span>
            <div style="flex:1;"></div>
        </div>
        <webview id="webview" src="about:blank" allowpopups></webview>
    </div>

    <button class="ai-float-btn" id="aiFloatBtn" onclick="toggleFloatPanel()">‚ú®</button>
    <div class="ai-float-panel" id="floatPanel">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
            <h4 style="color:white; margin:0;">Quick Analysis</h4>
            <button onclick="toggleFloatPanel()" style="background:none; border:none; color:#aaa; cursor:pointer;">‚úï</button>
        </div>
        <textarea id="floatInput" rows="3" placeholder="Paste text here..."></textarea>
        <button class="btn-action" onclick="analyzeFloat()">Analyze with Gemini</button>
        <div id="floatResult" style="margin-top:10px; font-size:12px; color:#ddd; max-height:150px; overflow-y:auto;"></div>
    </div>

    <script>
        // --- Time & Reminder System ---
        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-US', {hour:'2-digit', minute:'2-digit'});
            checkReminders(now);
        }
        setInterval(updateTime, 1000);

        function checkReminders(now) {
            const currentHM = now.toLocaleTimeString('en-GB', {hour:'2-digit', minute:'2-digit'}); // Format: HH:mm
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            let changed = false;

            tasks.forEach(task => {
                if (task.time && !task.completed && !task.notified && task.time === currentHM) {
                    new Notification("AI Scholar Reminder", { body: task.text });
                    task.notified = true;
                    changed = true;
                }
            });

            if(changed) {
                localStorage.setItem('tasks', JSON.stringify(tasks));
                renderTasks();
            }
        }

        // --- Webview Logic ---
        const webview = document.getElementById('webview');
        const frameContainer = document.getElementById('frameContainer');
        const aiFloatBtn = document.getElementById('aiFloatBtn');
        const titleSpan = document.getElementById('frameTitle');

        function openInView(url) {
            frameContainer.classList.add('active');
            aiFloatBtn.classList.add('visible');
            webview.src = url;
            webview.addEventListener('page-title-updated', (e) => { titleSpan.textContent = e.title; });
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value;
            if(!query) return;
            if(query.includes('.') && !query.includes(' ')) {
                openInView(query.startsWith('http') ? query : 'https://' + query);
            } else {
                openInView('https://www.google.com/search?q=' + encodeURIComponent(query));
            }
        }

        function closeView() {
            frameContainer.classList.remove('active');
            aiFloatBtn.classList.remove('visible');
            document.getElementById('floatPanel').classList.remove('active');
            webview.src = "about:blank"; 
        }
        function webviewBack() { if(webview.canGoBack()) webview.goBack(); }
        function webviewForward() { if(webview.canGoForward()) webview.goForward(); }
        function webviewReload() { webview.reload(); }

        // --- Sidebar Logic ---
        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.target.classList.add('active');
        }

        // --- Notes Storage ---
        function saveNote() {
            const txt = document.getElementById('quickNote').value;
            if(!txt) return;
            const notes = JSON.parse(localStorage.getItem('notes') || '[]');
            notes.unshift(txt);
            localStorage.setItem('notes', JSON.stringify(notes));
            renderNotes();
            document.getElementById('quickNote').value = '';
        }
        function renderNotes() {
            const list = document.getElementById('notesList');
            const notes = JSON.parse(localStorage.getItem('notes') || '[]');
            list.innerHTML = notes.map(n => `<div style="padding:8px; background:rgba(255,255,255,0.1); margin-bottom:5px; border-radius:4px;">${n}</div>`).join('');
        }
        renderNotes();

        // --- Reminders / Tasks Logic ---
        function addTask() {
            const txt = document.getElementById('taskInput').value;
            const time = document.getElementById('taskTime').value; // Get time
            
            if(!txt) return;
            
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            tasks.push({
                text: txt,
                time: time,       // Store the time
                completed: false,
                notified: false   // Track if we alerted the user
            });
            
            localStorage.setItem('tasks', JSON.stringify(tasks));
            renderTasks();
            
            document.getElementById('taskInput').value = '';
            document.getElementById('taskTime').value = '';
        }

        function renderTasks() {
            const list = document.getElementById('taskList');
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            
            list.innerHTML = tasks.map((t, index) => `
                <div style="padding:8px; border-bottom:1px solid #444; display:flex; justify-content:space-between; align-items:center; ${t.completed ? 'opacity:0.5; text-decoration:line-through;' : ''}">
                    <div onclick="toggleTask(${index})" style="cursor:pointer; flex:1;">
                        ${t.completed ? '‚úÖ' : '‚óª'} ${t.text}
                    </div>
                    ${t.time ? `<div style="font-size:10px; color:var(--color-primary); margin-left:10px; background:rgba(99,102,241,0.2); padding:2px 6px; border-radius:4px;">‚è∞ ${t.time}</div>` : ''}
                    <div onclick="deleteTask(${index})" style="cursor:pointer; color:#ef4444; margin-left:10px; font-weight:bold;">√ó</div>
                </div>
            `).join('');
        }

        function toggleTask(index) {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            tasks[index].completed = !tasks[index].completed;
            localStorage.setItem('tasks', JSON.stringify(tasks));
            renderTasks();
        }

        function deleteTask(index) {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            tasks.splice(index, 1);
            localStorage.setItem('tasks', JSON.stringify(tasks));
            renderTasks();
        }
        renderTasks();

        // --- Settings ---
        function saveApiKey() {
            const key = document.getElementById('apiKey').value;
            localStorage.setItem('gemini_key', key);
            alert('API Key Saved!');
        }

        // --- Floating AI ---
        function toggleFloatPanel() { document.getElementById('floatPanel').classList.toggle('active'); }

        async function analyzeFloat() {
            const text = document.getElementById('floatInput').value;
            const key = localStorage.getItem('gemini_key');
            if(!key) { alert('Set API Key in Settings first!'); return; }
            
            const resultDiv = document.getElementById('floatResult');
            resultDiv.textContent = "‚è≥ Analyzing...";
            
            try {
                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=' + key, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ contents: [{ parts: [{ text: "Summarize this concisely:\n\n" + text }] }] })
                });
                const data = await response.json();
                resultDiv.textContent = data.candidates[0].content.parts[0].text;
            } catch(e) {
                resultDiv.textContent = "Error: " + e.message;
            }
        }
    </script>
</body>
</html>